/**
 * @license
 * Copyright (C) 2018 Gnucoop soc. coop.
 *
 * This file is part of the Gnucoop Angular Toolkit (gngt).
 *
 * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.
 *
 */
!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@angular/material/button"),require("@angular/material/card"),require("@angular/material/checkbox"),require("@angular/material/dialog"),require("@angular/material/form-field"),require("@angular/material/icon"),require("@angular/material/input"),require("@angular/material/paginator"),require("@angular/material/progress-bar"),require("@angular/material/radio"),require("@angular/material/select"),require("@angular/material/sort"),require("@angular/material/table"),require("@angular/material/toolbar"),require("@angular/router"),require("@ngx-translate/core"),require("@gngt/core/common"),require("@gngt/core/admin"),require("@angular/cdk/collections"),require("@gngt/material/model")):"function"==typeof define&&define.amd?define("@gngt/material/admin",["exports","@angular/common","@angular/core","@angular/forms","@angular/material/button","@angular/material/card","@angular/material/checkbox","@angular/material/dialog","@angular/material/form-field","@angular/material/icon","@angular/material/input","@angular/material/paginator","@angular/material/progress-bar","@angular/material/radio","@angular/material/select","@angular/material/sort","@angular/material/table","@angular/material/toolbar","@angular/router","@ngx-translate/core","@gngt/core/common","@gngt/core/admin","@angular/cdk/collections","@gngt/material/model"],a):a(((t=t||self).dewco=t.dewco||{},t.dewco.material=t.dewco.material||{},t.dewco.material.admin={}),t.ng.common,t.ng.core,t.ng.forms,t.ng.material.button,t.ng.material.card,t.ng.material.checkbox,t.ng.material.dialog,t.ng.material.formField,t.ng.material.icon,t.ng.material.input,t.ng.material.paginator,t.ng.material.progressBar,t.ng.material.radio,t.ng.material.select,t.ng.material.sort,t.ng.material.table,t.ng.material.toolbar,t.ng.router,t.ngxt.core,t.gngt.core.common,t.gngt.core.admin,t.ng.cdk.collections)}(this,function(t,a,n,e,r,o,l,i,c,m,d,s,g,u,p,f,h,b,y,x,C,M,S){"use strict";var v=function(t,a){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var e in a)a.hasOwnProperty(e)&&(t[e]=a[e])})(t,a)};function w(t,a){function e(){this.constructor=t}v(t,a),t.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}var k=function(){function t(){}return t.decorators=[{type:n.Component,args:[{selector:"gngt-admin-delete-confirm",template:"<h2 mat-dialog-title>{{ 'Confirm' | translate }}</h2><mat-dialog-content>{{ 'Are you sure you want to delete?' | translate }}</mat-dialog-content><mat-dialog-actions><button mat-button mat-dialog-close>{{ 'No' | translate }}</button> <button mat-button [mat-dialog-close]=\"true\">{{ 'Yes' | translate }}</button></mat-dialog-actions>",styles:[""],changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None}]}],t}(),D=function(e){function t(t){var a=e.call(this)||this;return a.dialog=t,a}return w(t,e),t.prototype.askDeleteConfirm=function(){return this.dialog.open(k).afterClosed()},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:i.MatDialog}]},t}(M.AdminUserInteractionsService),q=function(r){function t(t,a,e){return r.call(this,t,a,e)||this}return w(t,r),t.decorators=[{type:n.Component,args:[{selector:"gngt-admin-edit",template:'<mat-card *ngIf="form|async as editForm"><h2 *ngIf="title" mat-card-header>{{ title }} <span *ngIf="editForm.value[\'id\']">#{{ editForm.value[\'id\'] }}</span></h2><mat-card-content><form [formGroup]="editForm" [gngtFormDisabled]="loading|async"><ng-container *ngFor="let field of fields"><div *ngIf="!field.hidden"><ng-container [ngSwitch]="field.type"><mat-form-field *ngSwitchCase="\'input\'"><input matInput [formControlName]="field.name" [type]="field.subtype || \'text\'" [placeholder]="field.label | translate" [readonly]="field.readonly"></mat-form-field><mat-form-field *ngSwitchCase="\'textarea\'"><textarea matInput [formControlName]="field.name" [placeholder]="field.label | translate"></textarea></mat-form-field><div *ngSwitchCase="\'checkbox\'"><mat-checkbox [formControlName]="field.name">{{ field.label | translate }}</mat-checkbox></div><mat-radio-group *ngSwitchCase="\'radio\'"><label class="mat-form-field-label">{{ field.label | translate }}</label><mat-radio-button *ngFor="let choice of field.choices|async" [value]="choice.value">{{ choice.label | translate }}</mat-radio-button></mat-radio-group><mat-form-field *ngSwitchCase="\'select\'"><mat-select [placeholder]="field.label | translate" [formControlName]="field.name"><mat-option *ngFor="let choice of field.choices|async" [value]="choice.value">{{ choice.label | translate }}</mat-option></mat-select></mat-form-field></ng-container></div></ng-container></form></mat-card-content><mat-card-actions><button (click)="save()" [disabled]="!editForm.valid" mat-raised-button color="primary">{{ saveLabel | translate }}</button> <button (click)="goBack()" mat-raised-button color="warn">{{ cancelLabel | translate }}</button></mat-card-actions><mat-card-footer><mat-progress-bar *ngIf="loading|async" mode="indeterminate"></mat-progress-bar></mat-card-footer></mat-card>',styles:["gngt-admin-edit{display:block}gngt-admin-edit>.mat-card>[mat-card-header]{margin:-16px -16px 32px;padding:16px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}gngt-admin-edit>.mat-card>.mat-card-actions{text-align:right}gngt-admin-edit>.mat-card mat-radio-group{display:block;position:relative;padding:.4375em 0;border-top:.84375em solid transparent}gngt-admin-edit>.mat-card mat-radio-group>label{display:block;top:-.84375em;transform:scale(.75) perspective(100px) translateZ(.001px)}gngt-admin-edit>.mat-card mat-radio-group mat-radio-button{margin-right:1em}"],changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,inputs:["title","listUrl","cancelLabel","saveLabel","service","fields","processFormData","processObject","id"]}]}],t.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:e.FormBuilder},{type:y.Router}]},t}(M.AdminEditComponent),I=function(r){function t(t,a){var e=r.call(this,t,a)||this;return e.selection=new S.SelectionModel(!0,[]),e}return w(t,r),t.prototype.ngOnInit=function(){this.dataSource.paginator=this.paginatorCmp,this.dataSource.sort=this.sortCmp},t.prototype.getSelection=function(){return this.selection.selected},t.prototype.getItems=function(){return this.dataSource.data},t.prototype.clearSelection=function(){this.selection.clear()},t.prototype.selectAll=function(){var a=this;this.dataSource.data.forEach(function(t){return a.selection.select(t)})},t.prototype.refreshList=function(){this.dataSource.refresh()},t.decorators=[{type:n.Component,args:[{selector:"gngt-admin-list",template:'<mat-card><h2 mat-card-header>{{ title }}</h2><button [routerLink]="baseEditUrl + newItemPath" mat-mini-fab color="primary"><mat-icon>add</mat-icon></button><mat-card-content><mat-toolbar><div class="gngt-actions"><mat-select #actionSel [disabled]="!selection.hasValue()" [placeholder]="\'Action\' | translate"><mat-option value="delete">{{ \'Delete\' | translate }}</mat-option></mat-select><span class="gngt-spacer"></span> <button mat-raised-button [disabled]="!actionSel.value" (click)="processAction(actionSel.value)">{{ \'Apply\' | translate }}</button></div><span class="gngt-filler"></span><mat-paginator [pageSizeOptions]="[20, 50, 100]" showFirstLastButtons></mat-paginator></mat-toolbar><table mat-table [dataSource]="dataSource" matSort><ng-container matColumnDef="select"><th mat-header-cell *matHeaderCellDef><mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()" [indeterminate]="selection.hasValue() && !isAllSelected()"></mat-checkbox></th><td class="gngt-select" mat-cell *matCellDef="let row"><mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)"></mat-checkbox></td></ng-container><ng-container *ngFor="let header of headers" [matColumnDef]="header.column"><ng-container *ngIf="header.sortable; else notSortable"><th mat-header-cell *matHeaderCellDef mat-sort-header>{{ header.label | translate }}</th></ng-container><ng-template #notSortable><th mat-header-cell *matHeaderCellDef>{{ header.label | translate }}</th></ng-template><td [routerLink]="baseEditUrl + element.id" mat-cell *matCellDef="let element">{{ element|gngtGetObjectProperty:header.column }}</td></ng-container><tr mat-header-row *matHeaderRowDef="displayedColumns"></tr><tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr></table></mat-card-content></mat-card>',styles:["gngt-admin-list{display:block}gngt-admin-list>.mat-card>[mat-card-header]{margin:-24px -24px 48px;padding:24px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}gngt-admin-list>.mat-card>[mat-card-header]+[mat-mini-fab]{position:absolute;right:24px;margin-top:-70px}gngt-admin-list>.mat-card>.mat-card-content>.mat-toolbar{margin:1em 0}gngt-admin-list>.mat-card>.mat-card-content>.mat-toolbar .gngt-spacer{flex:0 0 .5em}gngt-admin-list>.mat-card>.mat-card-content>.mat-toolbar .gngt-filler{flex:1 1 auto}gngt-admin-list>.mat-card>.mat-card-content>.mat-toolbar .mat-paginator{background:0 0}gngt-admin-list>.mat-card>.mat-card-content>.mat-toolbar .gngt-actions{display:flex;align-items:center}gngt-admin-list>.mat-card>.mat-card-content>.mat-toolbar .gngt-actions>*{flex-shrink:0}gngt-admin-list>.mat-card>.mat-card-content table{width:100%}gngt-admin-list>.mat-card>.mat-card-content table td:not(.gngt-select){cursor:pointer}"],changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,inputs:["title","headers","displayedColumns","baseEditUrl","newItemPath","service"]}]}],t.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:D}]},t.propDecorators={dataSource:[{type:n.Input}],paginatorCmp:[{type:n.ViewChild,args:[s.MatPaginator]}],sortCmp:[{type:n.ViewChild,args:[f.MatSort]}],actionSel:[{type:n.ViewChild,args:["actionSel",{read:p.MatSelect}]}]},t}(M.AdminListComponent),F=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[a.CommonModule,e.ReactiveFormsModule,r.MatButtonModule,o.MatCardModule,l.MatCheckboxModule,i.MatDialogModule,c.MatFormFieldModule,m.MatIconModule,d.MatInputModule,s.MatPaginatorModule,g.MatProgressBarModule,u.MatRadioModule,p.MatSelectModule,f.MatSortModule,h.MatTableModule,b.MatToolbarModule,y.RouterModule,x.TranslateModule,C.CommonModule],declarations:[k,q,I],exports:[q,I],entryComponents:[k],providers:[D]}]}],t}();t.AdminModule=F,t.AdminUserInteractionsService=D,t.AdminEditComponent=q,t.AdminListComponent=I,t.ɵa=k,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=material-admin.umd.min.js.map
