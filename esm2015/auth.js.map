{"version":3,"file":"auth.js","sources":["../../../src/material/auth/auth-module.ts","../../../src/material/auth/login.ts","../../../src/material/auth/auth-user-interactions.ts","../../../src/material/auth/logout-confirm-dialog.ts"],"sourcesContent":["/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {CommonModule} from '@angular/common';\nimport {HTTP_INTERCEPTORS} from '@angular/common/http';\nimport {NgModule, ModuleWithProviders} from '@angular/core';\nimport {ReactiveFormsModule} from '@angular/forms';\nimport {MatButtonModule} from '@angular/material/button';\nimport {MatCardModule} from '@angular/material/card';\nimport {MatDialog, MatDialogModule} from '@angular/material/dialog';\nimport {MatFormFieldModule} from '@angular/material/form-field';\nimport {MatInputModule} from '@angular/material/input';\nimport {MatSnackBar, MatSnackBarModule} from '@angular/material/snack-bar';\n\nimport {TranslateModule} from '@ngx-translate/core';\n\nimport {\n  AUTH_OPTIONS, AuthModule as CoreAuthModule, AuthModuleOptions,\n  AuthUserInteractionsService as CoreAuthUserInteractionsService,\n  JWT_OPTIONS, JwtHelperService, JwtInterceptor\n} from '@gngt/core/auth';\nimport {CommonModule as GngtCommonModule} from '@gngt/core/common';\n\nimport {AuthUserInteractionsService} from './auth-user-interactions';\nimport {LoginComponent} from './login';\nimport {LogoutConfirmDialogComponent} from './logout-confirm-dialog';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    MatButtonModule,\n    MatCardModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatSnackBarModule,\n    TranslateModule,\n    CoreAuthModule,\n    GngtCommonModule\n  ],\n  declarations: [\n    LoginComponent,\n    LogoutConfirmDialogComponent\n  ],\n  exports: [\n    LoginComponent\n  ],\n  entryComponents: [\n    LogoutConfirmDialogComponent\n  ],\n  providers: [\n    {\n      provide: CoreAuthUserInteractionsService,\n      useClass: AuthUserInteractionsService,\n      deps: [MatDialog, MatSnackBar]\n    }\n  ]\n})\nexport class AuthModule {\n  static forRoot(options: AuthModuleOptions): ModuleWithProviders {\n    return {\n      ngModule: AuthModule,\n      providers: [\n        {\n          provide: HTTP_INTERCEPTORS,\n          useClass: JwtInterceptor,\n          multi: true\n        },\n        options.jwtOptionsProvider ||\n        {\n          provide: JWT_OPTIONS,\n          useValue: options.jwtConfig\n        },\n        options.authOptionsProvider ||\n        {\n          provide: AUTH_OPTIONS,\n          useValue: options.authConfig\n        },\n        JwtHelperService\n      ]\n    };\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {\n  ChangeDetectionStrategy, ChangeDetectorRef, Component, ViewEncapsulation\n} from '@angular/core';\nimport {FormBuilder} from '@angular/forms';\n\nimport {Store} from '@ngrx/store';\n\nimport {LoginComponent as CoreLoginComponent, reducers as fromAuth} from '@gngt/core/auth';\n\n@Component({\n  moduleId: module.id,\n  selector: 'gngt-login',\n  templateUrl: 'login.html',\n  styleUrls: ['login.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  inputs: [\n    'disabled'\n  ]\n})\nexport class LoginComponent extends CoreLoginComponent {\n  constructor(fb: FormBuilder, store: Store<fromAuth.State>, cdr: ChangeDetectorRef) {\n    super(fb, store, cdr);\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {MatDialog} from '@angular/material/dialog';\nimport {MatSnackBar} from '@angular/material/snack-bar';\n\nimport {Observable} from 'rxjs';\n\nimport {AuthUserInteractionsService as CoreAuthUserInteractionsService} from '@gngt/core/auth';\n\nimport {LogoutConfirmDialogComponent} from './logout-confirm-dialog';\n\nexport class AuthUserInteractionsService extends CoreAuthUserInteractionsService {\n  constructor(private _dialog: MatDialog, private _snackBar: MatSnackBar) {\n    super();\n  }\n\n  askLogoutConfirm(): Observable<boolean> {\n    return this._dialog.open(LogoutConfirmDialogComponent).afterClosed();\n  }\n\n  showLoginError(error: string): void {\n    this._snackBar.open(error, undefined, {duration: 3000});\n  }\n}\n","/**\n * @license\n * Copyright (C) 2018 Gnucoop soc. coop.\n *\n * This file is part of the Gnucoop Angular Toolkit (gngt).\n *\n * Gnucoop Angular Toolkit (gngt) is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * Gnucoop Angular Toolkit (gngt) is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with Gnucoop Angular Toolkit (gngt).  If not, see http://www.gnu.org/licenses/.\n *\n */\n\nimport {ChangeDetectionStrategy, Component, ViewEncapsulation} from '@angular/core';\n\n/**\n * The dialog will close with true if user clicks the ok button,\n * otherwise it will close with undefined.\n */\n@Component({\n  moduleId: module.id,\n  selector: 'gngt-logout-confirm',\n  templateUrl: 'logout-confirm-dialog.html',\n  styleUrls: ['logout-confirm-dialog.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None\n})\nexport class LogoutConfirmDialogComponent {}\n"],"names":["CoreAuthUserInteractionsService","GngtCommonModule","CoreAuthModule","CoreLoginComponent"],"mappings":"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"}